<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Usage & Billing | NETSIM</title>
    <link rel="icon" type="image/x-icon" href="img/LogoS.png">
    <link rel="stylesheet" href="style.css">
    <script src="dack.js"></script>
    <script>
        (function() {
            if (!localStorage.getItem("user")) {
                window.location.replace("login.html");
            }
        })();
    </script>
</head>
<body class="usage-page">

<header class="navbar">
    <div class="logo" onclick="window.location.href='home.html'">
        NET<span>SIM</span>
    </div>
    <button id="themeToggleBtn" class="login-btn" onclick="toggleTheme()" style="margin-left: auto; margin-right: 10px; background: transparent; border: 1px solid #fdef2e; color: #fdef2e;">
        ðŸŒ™
    </button>
    <div class="user-actions">
        <div class="profile-btn" onclick="window.location.href='profile.html'">
            <div class="profile-card">
                <img id="profileImage" src="img/P.png" alt="Profile">
                <h3 id="profileName"></h3>
                <p id="profileEmail"></p>
            </div>
        </div>
        
        <button class="openbtn" onclick="openNav()">â˜°</button>
    </div>

    <div id="mySidepanel" class="sidepanel">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">Ã—</a>
        
        <a href="admin_dashboard.html" id="adminBtn" style="display: none;">Admin Dashboard</a>
        <a href="admin_products.html" id="adminProductsBtn" style="display: none;">Admin Products</a>
        
        <a href="#packages">Internet Packages</a>
        <a href="#services">Entertainment Services</a>
        <a href="usage.html">Bills and Usage</a>
        <a href="javascript:void(0)" class="login-btn" onclick="logout()">Logout</a>
    </div>
</header>

    <div class="usage-container">
        <h2 class="section-title">My Active Packages</h2>
        <div id="active-package" class="usage-grid">
            <p>Loading usage...</p>
        </div>

        <h2 class="section-title">Billing History</h2>

        <section class="billing-section">
            <div class="history-controls" style="display: flex; gap: 10px; align-items: center; flex-wrap: wrap;">
                
                <div style="display: flex; align-items: center; gap: 5px;">
                    <label for="sortOrder" style="font-weight: bold;">Sort:</label>
                    <select id="sortOrder" class="date-input" style="padding: 8px; cursor: pointer;">
                        <option value="desc">Newest First</option>
                        <option value="asc">Oldest First</option>
                    </select>
                </div>

                <div style="display: flex; align-items: center; gap: 5px;">
                    <label for="dateFilter" style="font-weight: bold;">Date:</label>
                    <input type="date" id="dateFilter" class="date-input">
                    <button onclick="resetDateFilter()" class="btn-outline" style="padding: 8px 15px; width: auto;">Show All</button>
                </div>

            </div>

            <div class="table-responsive">
                <table class="bill-table">
                    <colgroup>
                        <col style="width: 45%;">  
                        <col style="width: 20%;">  
                        <col style="width: 20%;">  
                    </colgroup>

                    <thead>
                        <tr style="background: #f4f4f4; text-align: left;">
                            <th style="padding: 15px;">Package</th>
                            <th style="padding: 15px;">Type</th>
                            <th style="padding: 15px;">Price</th>
                        </tr>
                    </thead>
                    <tbody id="billing-table-body">
                        </tbody>
                </table>
            </div>
            <div id="pagination" class="pagination-container"></div>
        </section>
                
        <div style="margin-top: 30px; text-align: center;">
            <button onclick="window.location.href='home.html'" class="btn-outline" style="max-width: 200px;">Back to Home</button>
        </div>
    </div>
    <footer class="footer">
    <p>Â© 2025 NETSIM Network Service Provider</p>
</footer>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.1.0/dist/umd/supabase.js"></script>
    <script src="auth_monitor.js"></script>
    <script type="module" src="usage.js"></script>
    <script src="home.js"></script> 
    <script>
        function logout() {
            localStorage.removeItem("user");
            window.location.href = "login.html";
        }
    </script>
    <script src="HB.js"></script>  
    <script type="module" src="homepro.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.2/jspdf.plugin.autotable.min.js"></script>
</body>
</html>
